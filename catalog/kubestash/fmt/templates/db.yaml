{{ "{{ $featureGates := .Values.featureGates }}" }}
{{ "{{ $ubi := .Values.distro.ubi }}" }}
{{ "{{- if .Values.global }}" }}
{{ "  {{ $featureGates = mergeOverwrite dict .Values.featureGates .Values.global.featureGates }}" }}
{{ "  {{ $ubi = default .Values.distro.ubi .Values.global.distro.ubi }}" }}
{{ "{{- end }}" }}

{{"{{ if and $featureGates."}}{{ .kind }}{{" (not (eq $ubi \"operator\")) }}"}}
apiVersion: {{ .object.apiVersion }}
kind: {{ .object.kind }}
metadata:
  name: '{{ .object.metadata.name }}'
  labels:
    {{"{{- include \"kubedb-kubestash-catalog.labels\" . | nindent 4 }}"}}
spec:
  {{- .object.spec | toYaml | nindent 2 }}
{{"{{ end }}"}}
